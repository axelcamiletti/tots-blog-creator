<div class="modal-content">

  <!-- Modal Header -->
  <div class="modal-header">
    <div class="text-2xl"><b>🚀 Crear Nuevo Artículo</b></div>
    <button
      (click)="closeModal()"
      class="btn-icon btn-secondary">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>
  </div>

  <!-- Modal Body -->
  <div class="modal-body">
    <form #articleForm="ngForm" class="space-y-6">
      <!-- Topic Input -->
      <div class="group">
        <label for="topic">💡 Tema del Artículo</label>
        <input
          type="text"
          id="topic"
          [value]="topic()"
          (input)="onTopicChange($any($event.target).value)"
          placeholder="Ej: Cómo la IA puede automatizar procesos empresariales"
          [class.input-error]="error()"
          required>
        @if (error()) {
          <p class="mt-2 text-sm text-red-600 flex items-center gap-2">
            <span>⚠️</span>
            {{ error() }}
          </p>
        }
      </div>

      <!-- Segment Selector -->
      <div class="group">
        <label for="segment">🎯 Segmento</label>
        <select
          id="segment"
          [value]="segment()"
          (change)="onSegmentChange($any($event.target).value)"
          class="select">
          @for (option of segmentOptions; track option) {
            <option [value]="option">
              @switch (option) {
                @case ('IA') { 🤖 IA }
                @case ('Apps móviles') { 📱 Apps móviles }
                @case ('Sportech') { ⚽ Sportech }
                @case ('Ciberseguridad') { 🔒 Ciberseguridad }
              }
            </option>
          }
        </select>
      </div>

      <!-- Author Input -->
      <div class="group">
        <label for="author">👤 Autor</label>
        <input
          type="text"
          id="author"
          [value]="author()"
          (input)="onAuthorChange($any($event.target).value)"
          placeholder="Nombre del autor"
          class="input">
      </div>
    </form>

    <!-- Generation Progress -->
    <!-- @if (isGenerating()) {
      <div class="card mt-6 animate-slide-in-up">
        <div class="card-body !py-4">
          <div class="flex items-center mb-4">
            <div class="flex-shrink-0">
              <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center">
                <svg class="loading-spinner text-white" fill="none" viewBox="0 0 24 24">
                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                  <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 818-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
              </div>
            </div>
            <div class="ml-4">
              <h4 class="text-base font-bold text-gray-900">🎨 Creando tu artículo...</h4>
              <p class="text-sm text-gray-600">La magia está sucediendo ✨ Esto puede tomar 2-5 minutos</p>
            </div>
          </div>

          <div class="space-y-3">
            <div class="progress-step active">
              <div class="progress-icon active">1</div>
              <span>🌐 Investigando el tema con IA avanzada</span>
            </div>
            <div class="progress-step">
              <div class="progress-icon">2</div>
              <span>📝 Generando contenido optimizado</span>
            </div>
            <div class="progress-step">
              <div class="progress-icon">3</div>
              <span>🎨 Creando imagen impactante</span>
            </div>
            <div class="progress-step">
              <div class="progress-icon">4</div>
              <span>💾 Guardando obra maestra</span>
            </div>
          </div>
        </div>
      </div>
    } -->
  </div>

  <!-- Modal Footer -->
  <div class="modal-footer">
    <button type="button" (click)="closeModal()" [disabled]="isGenerating()" class="btn btn-secondary btn-outline">
      ❌ Cancelar
    </button>
    <button
      type="submit"
      [disabled]="isGenerating() || !topic().trim()"
      (click)="generateArticle()"
      class="btn btn-primary">
      @if (isGenerating()) {
        <svg class="loading-spinner" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 818-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        Generando Magia...
      } @else {
          🚀 ¡Generar Artículo!
      }
    </button>
  </div>
</div>
